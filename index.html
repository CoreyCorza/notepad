<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notepad</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="styles.css?v=1.1.0">
</head>

<body>
    <div class="app">
        <div class="window-titlebar">
            <div class="window-menus">
                <div class="menu-item">
                    <span>File</span>
                    <div class="menu-dropdown">
                        <div id="menuNew" class="menu-action"><span>New File</span><span
                                class="menu-shortcut">Ctrl+N</span></div>
                        <div id="menuOpen" class="menu-action"><span>Open File</span><span
                                class="menu-shortcut">Ctrl+O</span></div>
                        <div id="menuSave" class="menu-action"><span>Save</span><span
                                class="menu-shortcut">Ctrl+S</span></div>
                        <div id="menuSaveAs" class="menu-action"><span>Save As...</span><span
                                class="menu-shortcut">Ctrl+Shift+S</span></div>
                        <div class="menu-divider"></div>
                        <div id="menuPreferences" class="menu-action"><span>Preferences</span><span
                                class="menu-shortcut">Alt+P</span></div>
                        <div class="menu-divider"></div>
                        <div id="menuExit" class="menu-action"><span>Exit</span><span
                                class="menu-shortcut">Alt+F4</span></div>
                    </div>
                </div>
                <div class="menu-item">
                    <span>Edit</span>
                    <div class="menu-dropdown">
                        <div class="menu-action" onclick="document.execCommand('undo')"><span>Undo</span><span
                                class="menu-shortcut">Ctrl+Z</span></div>
                        <div class="menu-action" onclick="document.execCommand('redo')"><span>Redo</span><span
                                class="menu-shortcut">Ctrl+Y</span></div>
                        <div class="menu-divider"></div>
                        <div class="menu-action" onclick="document.execCommand('cut')"><span>Cut</span><span
                                class="menu-shortcut">Ctrl+X</span></div>
                        <div class="menu-action" onclick="document.execCommand('copy')"><span>Copy</span><span
                                class="menu-shortcut">Ctrl+C</span></div>
                        <div class="menu-action" onclick="handlePaste()"><span>Paste</span><span
                                class="menu-shortcut">Ctrl+V</span></div>
                        <div class="menu-divider"></div>
                        <div id="menuEmojiPicker" class="menu-action"><span>Emoji</span><span
                                class="menu-shortcut">Ctrl+Shift+E</span></div>
                    </div>
                </div>
            </div>
            <div class="window-controls">
                <div class="settings-wrapper">
                    <div id="btnQuickSettings" class="md-btn">
                        <i data-lucide="settings"></i>
                    </div>

                    <!-- Settings Popover -->
                    <div id="settingsPopover" class="popover">
                        <div class="popover-item">
                            <div class="popover-label">
                                <span>Text Zoom</span>
                                <span id="zoomValue">100%</span>
                            </div>
                            <input type="range" id="zoomSlider" min="50" max="250" value="100" step="10">
                        </div>
                        <div class="popover-divider"></div>
                        <label class="popover-item popover-item--row" for="checkWordWrap">
                            <span style="font-size: 11px; cursor: pointer;">Word Wrap</span>
                            <div class="toggle-switch">
                                <input type="checkbox" id="checkWordWrap">
                                <span class="toggle-slider"></span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Markdown controls moved to float over editor -->

                <div class="control-divider"></div>

                <div id="winMinimize" class="win-btn win-btn--min"></div>
                <div id="winMaximize" class="win-btn win-btn--max"></div>
                <div id="winClose" class="win-btn win-btn--close"></div>
            </div>
        </div>

        <header class="topbar">
            <div class="topbar__left">
                <div id="tabs" class="tabs">
                    <!-- Tabs will be injected here -->
                </div>
            </div>
        </header>

        <main class="main">
            <div id="editorWrapper" class="editor-wrapper">
                <!-- Search Bar -->
                <div id="searchBar" class="search-bar search-bar--hidden">
                    <div class="search-bar__inner">
                        <div class="search-row">
                            <div class="search-input-wrapper">
                                <input type="text" id="findInput" placeholder="Find..." autocomplete="off">
                                <div class="search-options">
                                    <button id="toggleCase" class="option-btn" data-tooltip="Match Case"><i
                                            data-lucide="case-sensitive"></i></button>
                                </div>
                            </div>
                            <div class="search-nav">
                                <span id="findCount">0/0</span>
                                <div class="control-divider control-divider--vertical"></div>
                                <button id="findPrev" class="icon-btn" data-tooltip="Previous (Shift+F3)"><i
                                        data-lucide="chevron-up"></i></button>
                                <button id="findNext" class="icon-btn" data-tooltip="Next (F3)"><i
                                        data-lucide="chevron-down"></i></button>
                                <button id="closeSearch" class="icon-btn"><i data-lucide="x"></i></button>
                            </div>
                        </div>
                        <div id="replaceRow" class="search-row search-row--hidden">
                            <div class="search-input-wrapper">
                                <input type="text" id="replaceInput" placeholder="Replace with..." autocomplete="off">
                            </div>
                            <div class="search-nav">
                                <button id="replaceBtn" class="btn btn--small btn--ghost">Replace</button>
                                <button id="replaceAllBtn" class="btn btn--small btn--primary">All</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="editor-container">

                    <div class="editor-inner">
                        <textarea id="editor" spellcheck="false"></textarea>
                    </div>
                </div>
                <div id="preview" class="preview-container">
                    <div id="previewInner" class="preview-inner"></div>
                </div>
            </div>
            <div id="editorControls" class="editor-controls">
                <div id="btnPreviewFull" class="md-btn" data-tooltip="Full Preview Mode"><i data-lucide="eye"></i></div>
                <div id="btnPreviewSplit" class="md-btn" data-tooltip="Split Preview Mode"><i
                        data-lucide="columns-2"></i></div>
            </div>
        </main>

        <footer class="statusbar">
            <div class="statusbar__item">
                <span id="filePathDisplay">Untitled-1</span>
            </div>
            <div style="flex: 1;"></div>
            <div class="statusbar__item">
                <span id="cursorPos">Ln 1, Col 1</span>
            </div>
            <div class="statusbar__item">
                <span id="charCount">0 characters</span>
            </div>
            <div class="statusbar__item">
                <span id="encodingDisplay">UTF-8</span>
            </div>
        </footer>

        <div id="prefsPanel" class="prefs-panel prefs-panel--hidden">
            <div class="prefs-panel__head">
                <span>Preferences</span>
                <button id="prefsClose" class="btn--close-panel">Ã—</button>
            </div>
            <div class="prefs-panel__body">
                <div class="pref-group">
                    <label>Editor Background</label>
                    <input type="color" id="prefBgColor" data-var="--bg0">
                </div>
                <div class="pref-group">
                    <label>Title Bar</label>
                    <input type="color" id="prefTitleBarBg" data-var="--titlebar-bg">
                </div>
                <div class="pref-group">
                    <label>Tab Bar</label>
                    <input type="color" id="prefTopBarBg" data-var="--topbar-bg">
                </div>
                <div class="pref-group">
                    <label>Status Bar</label>
                    <input type="color" id="prefStatusBg" data-var="--statusbar-bg">
                </div>
                <div class="pref-group">
                    <label>Tab (Inactive)</label>
                    <input type="color" id="prefTabBg" data-var="--tab-bg">
                </div>
                <div class="pref-group">
                    <label>Tab (Active)</label>
                    <input type="color" id="prefTabActiveBg" data-var="--tab-active-bg">
                </div>
                <div class="pref-group">
                    <label>Panel / Menu</label>
                    <input type="color" id="prefPanelColor" data-var="--panel">
                </div>
                <div class="pref-group">
                    <label>Accent Color</label>
                    <input type="color" id="prefAccentColor" data-var="--accent">
                </div>
                <div class="pref-group">
                    <label>Text Color</label>
                    <input type="color" id="prefTextColor" data-var="--text">
                </div>
                <div class="pref-group">
                    <label>Scrollbar</label>
                    <input type="color" id="prefScrollbarColor" data-var="--scrollbar-thumb">
                </div>
                <div class="pref-group">
                    <label>Tooltip</label>
                    <input type="color" id="prefTooltipBg" data-var="--tooltip-bg">
                </div>
                <div class="pref-group">
                    <label>Button Active</label>
                    <input type="color" id="prefBtnActiveBg" data-var="--btn-active-bg">
                </div>
                <div class="pref-group">
                    <label>Menus</label>
                    <input type="color" id="prefMenuBg" data-var="--menu-bg">
                </div>
                <div style="margin-top: 20px; display: flex; gap: 8px;">
                    <button id="prefsReset" class="btn btn--ghost" style="flex: 1;">Reset</button>
                    <button id="prefsSave" class="btn btn--primary" style="flex: 1;">Save</button>
                </div>
            </div>
        </div>

        <!-- Custom Confirmation Modal -->
        <div id="modalOverlay" class="modal-overlay modal-overlay--hidden">
            <div id="confirmModal" class="custom-modal">
                <div class="custom-modal__head">
                    <span id="modalTitle">Unsaved Changes</span>
                </div>
                <div class="custom-modal__body">
                    <p id="modalMessage">Do you want to save changes?</p>
                </div>
                <div class="custom-modal__footer">
                    <button id="modalSave" class="btn btn--primary">Save</button>
                    <button id="modalDontSave" class="btn btn--ghost">Don't Save</button>
                    <button id="modalCancel" class="btn btn--ghost">Cancel</button>
                </div>
            </div>
        </div>

        <div id="dropZone" class="drop-zone">
            <i data-lucide="file-up"></i>
            <span>Drop files to open</span>
        </div>

        <div id="tooltip" class="tooltip"></div>

        <!-- Custom Context Menu -->
        <div id="contextMenu" class="context-menu context-menu--hidden">
            <div class="context-menu__item" id="ctxCut">
                <span>Cut</span>
            </div>
            <div class="context-menu__item" id="ctxCopy">
                <span>Copy</span>
            </div>
            <div class="context-menu__item" id="ctxPaste">
                <span>Paste</span>
            </div>
            <div class="context-menu-divider"></div>
            <div class="context-menu__item" id="ctxSelectAll">
                <span>Select All</span>
            </div>
        </div>

        <!-- Emoji Picker -->
        <div id="emojiPicker" class="emoji-picker emoji-picker--hidden">
            <div class="emoji-picker__search">
                <input type="text" id="emojiSearch" placeholder="Search emoji..." autocomplete="off">
            </div>
            <div id="emojiGrid" class="emoji-picker__grid"></div>
        </div>

        <script src="src/renderer.js"></script>
</body>

</html>